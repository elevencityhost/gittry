CREATE TABLE CN_AUDIT_DETAILS
   (
      ID int(11) NOT NULL AUTO_INCREMENT,
      JOB_ID varchar(255) NOT NULL,
      SYSTEM_ID varchar(10) NOT NULL,
      INTERFACE_ID varchar(20) NOT NULL,
      PHASE_ID varchar(10),
      BATCH_COUNTER int,
      EXTERNAL_ID varchar(50),
      CREATED_DT datetime DEFAULT NOW() NOT NULL,
      PROP_NAME varchar(50),
      PROP_VALUE varchar(50),
      STATUS_ID varchar(10),
      COMMENTS varchar(255),
	  primary key (id)
   )

ALTER TABLE test.CN_AUDIT_DETAILS
ADD CONSTRAINT FK_INTERFACE_ID
FOREIGN KEY (INTERFACE_ID)
REFERENCES test.CN_AUDIT_INTERFACES(INTERFACE_ID)

GO


ALTER TABLE test.CN_AUDIT_DETAILS
ADD CONSTRAINT FK_SYSTEM_ID
FOREIGN KEY (SYSTEM_ID)
REFERENCES test.CN_AUDIT_SYSTEMS(SYSTEM_ID)

GO

ALTER TABLE test.CN_AUDIT_DETAILS
ADD CONSTRAINT FK_PHASE_ID
FOREIGN KEY (PHASE_ID)
REFERENCES test.CN_AUDIT_PHASES(PHASE_ID)

GO

ALTER TABLE test.CN_AUDIT_DETAILS
ADD CONSTRAINT FK_STATUS_ID
FOREIGN KEY (STATUS_ID)
REFERENCES test.CN_AUDIT_STATUS(STATUS_ID)

GO


CREATE INDEX INDEX_CN_AUDIT_DETAILS ON test.CN_AUDIT_DETAILS
(  
  JOB_ID,   
  SYSTEM_ID,
  INTERFACE_ID
)

GO
